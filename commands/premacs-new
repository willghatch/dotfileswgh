#!/usr/bin/env bash

# start up new emacs daemon

newId=$RANDOM
EDIR=$DOTFILESWGH/emacs
cd $HOME
premaxd=${XDG_RUNTIME_DIR:-/tmp/$(whoami)}/
mkdir -p "$premaxd"
emacs --eval "(setq server-socket-dir \"$premaxd\")" -l $EDIR/def.el -l $EDIR/premacs-run.el "--daemon=premacs-socket-${newId}" && \
echo premacs-socket-${newId} >> "$premaxd/premacs-list"

